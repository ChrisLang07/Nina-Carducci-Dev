"use strict"
function dataCategories(){let imgItems=document.querySelectorAll('.gallery-item');let arrayKeys=[];let i;for(const key of imgItems.keys()){arrayKeys.push(key)};for(i=0;i<imgItems.length;i++){imgItems[i].setAttribute('data-category',arrayKeys[i])}};function createModal(){let gallery=document.querySelector('.gallery');let imgItems=document.querySelectorAll('.gallery-item');imgItems.forEach(imgItem=>{imgItem.addEventListener('click',event=>{let dataCategory=event.target.dataset.category;let dataGalleryTag=event.target.dataset.galleryTag;let img=document.createElement('img');img.classList.add('modal-img');img.srcset=event.target.srcset;img.alt=event.target.alt;img.dataset.category=dataCategory;img.dataset.galleryTag=dataGalleryTag;let modalBody=document.createElement('div');modalBody.classList.add('modal--body');let body=document.querySelector('body');let modalBackdrop=document.createElement('div');modalBackdrop.classList.add('modal-backdrop');previousButton(modalBody)
modalBody.appendChild(img);nextButton(modalBody);gallery.appendChild(modalBody);body.appendChild(modalBackdrop);modalBackdrop.addEventListener('click',event=>{modalBackdrop.remove();modalBody.remove()});img.addEventListener('click',event=>{modalBackdrop.remove();modalBody.remove()})})})};function createModalImg(modalBody,imgItem){let modalBackdrop=document.querySelector('.modal-backdrop');let img=document.createElement('img');img.classList.add('modal-img');img.srcset=imgItem.srcset;img.alt=imgItem.alt;img.dataset.category=imgItem.dataset.category;img.dataset.galleryTag=imgItem.dataset.galleryTag;img.addEventListener('click',event=>{modalBackdrop.remove();modalBody.remove()});modalBody.removeChild(modalBody.childNodes[1]);modalBody.insertBefore(img,modalBody.childNodes[1])};function previousButton(modalBody){let previousButton=document.createElement('span');previousButton.classList.add('previous-button-to-img');previousButton.classList.add('button-to-img');previousButton.textContent='<';previousButton.addEventListener('click',event=>{if(array.length==0){previousImage(modalBody)};if(array.length>0){previousFilterImage(modalBody)}});modalBody.appendChild(previousButton)};function nextButton(modalBody){let nextButton=document.createElement('span');nextButton.classList.add('next-button-to-img');nextButton.classList.add('button-to-img');nextButton.textContent='>';nextButton.addEventListener('click',event=>{console.log(event.target);if(array.length==0){nextImage(modalBody)};if(array.length>0){nextFilterImage(modalBody)}});modalBody.appendChild(nextButton)};function previousImage(modalBody){let imgItems=document.querySelectorAll('.gallery-item');let modalImg=document.querySelector('.modal-img');imgItems.forEach(imgItem=>{if(imgItem.dataset.category==Number(modalBody.childNodes[1].dataset.category)-1&&modalImg.dataset.category==Number(modalBody.childNodes[1].dataset.category)){createModalImg(modalBody,imgItem)}})};function nextImage(modalBody){let imgItems=document.querySelectorAll('.gallery-item');let modalImg=document.querySelector('.modal-img');imgItems.forEach(imgItem=>{if(imgItem.dataset.category==Number(modalBody.childNodes[1].dataset.category)+1&&modalImg.dataset.category==Number(modalBody.childNodes[1].dataset.category)){createModalImg(modalBody,imgItem)}})};function filtersListeners(array){document.body.addEventListener('click',event=>{if(event.target.matches('.nav-link')){array.length=0;event.target.classList.add('current');let imgItems=document.querySelectorAll('.gallery-item');imgItems.forEach(imgItem=>{console.log(event.target.textContent);if(imgItem.dataset.galleryTag==event.target.textContent){array.push(imgItem);console.log(array)}})}})};function nextFilterImage(modalBody){let nextFilterImage=array.find((element)=>element.dataset.category>modalBody.childNodes[1].dataset.category&&element.dataset.galleryTag==modalBody.childNodes[1].dataset.galleryTag);createModalImg(modalBody,nextFilterImage)};function previousFilterImage(modalBody){let previousFilterImage=null;let previousFilteredArray=array.filter((element)=>Math.max(element.dataset.category)<modalBody.childNodes[1].dataset.category&&element.dataset.galleryTag==modalBody.childNodes[1].dataset.galleryTag);previousFilteredArray.forEach(item=>{if(Math.max(item.dataset.category)<modalBody.childNodes[1].dataset.category){previousFilterImage=item}});createModalImg(modalBody,previousFilterImage)};dataCategories();createModal();let array=[];filtersListeners(array)